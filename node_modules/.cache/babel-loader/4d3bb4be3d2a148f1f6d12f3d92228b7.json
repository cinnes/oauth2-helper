{"ast":null,"code":"var _jsxFileName = \"/home/cinnes/Documents/Github/oauth2-helper/src/App.js\";\nimport React from 'react';\nimport { FormGroup, InputGroup } from '@blueprintjs/core';\nimport './App.css';\nimport rp from 'request-promise';\nimport { throwStatement } from '@babel/types';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      clientId: '1x46iftmdzqtt',\n      clientSecret: '4ctdx7k5du36r5q1qfkarhw2ts5tbbhyv13c8yar0es6k40cwg',\n      authEndpoint: 'https://api.capsulecrm.com/oauth/authorise',\n      tokenEndpoint: 'https://api.capsulecrm.com/oauth/token',\n      authCode: '',\n      homeUrl: 'https://40807517.ngrok.io/'\n    };\n    this.updateState = this.updateState.bind(this);\n    this.nextStage = this.nextStage.bind(this);\n    this.getToken = this.getToken.bind(this);\n  }\n\n  render() {\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const code = params.get('code');\n\n    if (this.state.authCode != code) {\n      this.setState({\n        authCode: code\n      });\n    }\n\n    var main;\n\n    if (this.state.authCode) {\n      main = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, \"Your authorisation code is: \", this.state.authCode), React.createElement(\"button\", {\n        onClick: this.getToken,\n        className: \"button\",\n        value: \"Access Token\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }));\n    } else {\n      main = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        helperText: \"The ID of the registered application\",\n        label: \"Client ID\",\n        labelFor: \"text-input\",\n        labelInfo: \"(required)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        id: \"text-input\",\n        placeholder: \"1x46iftmdzqtt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        helperText: \"Helper text\",\n        label: \"Client Secret\",\n        labelFor: \"text-input\",\n        labelInfo: \"(required)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        id: \"text-input\",\n        placeholder: \"4ctdx7k5du36r5q1qfkarhw2ts5tbbhyv13c8yar0es6k40cwg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        helperText: \"Helper text\",\n        label: \"Auth Endpoint\",\n        labelFor: \"text-input\",\n        labelInfo: \"(required)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        id: \"text-input\",\n        placeholder: \"https://my.domain/oauth/authorise\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        helperText: \"Helper text\",\n        label: \"Token Endpoint\",\n        labelFor: \"text-input\",\n        labelInfo: \"(required)\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        id: \"text-input\",\n        placeholder: \"https://my.domain/oauth/token\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })));\n    }\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      className: \"App-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), React.createElement(\"body\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, main)));\n  }\n\n  updateState(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  nextStage(event) {\n    event.preventDefault();\n    const url = \"\".concat(this.state.authEndpoint, \"?response_type=code&client_id=\").concat(this.state.clientId, \"&redirect_uri=\").concat(this.state.homeUrl, \"&scope=read write\");\n    console.log(url);\n    window.location = url;\n  }\n\n  getToken() {\n    const authCode = this.state.authCode;\n    const options = {\n      uri: this.state.tokenEndpoint,\n      method: 'POST',\n      body: {\n        code: authCode,\n        client_id: this.state.clientId,\n        client_secret: this.state.clientSecret,\n        grant_type: \"authorization_code\"\n      },\n      json: true\n    };\n    rp.post(options).then(function (res) {\n      console.log(res);\n    });\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/cinnes/Documents/Github/oauth2-helper/src/App.js"],"names":["React","FormGroup","InputGroup","rp","throwStatement","App","Component","constructor","props","state","clientId","clientSecret","authEndpoint","tokenEndpoint","authCode","homeUrl","updateState","bind","nextStage","getToken","render","search","window","location","params","URLSearchParams","code","get","setState","main","event","name","target","value","preventDefault","url","console","log","options","uri","method","body","client_id","client_secret","grant_type","json","post","then","res"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { FormGroup, InputGroup } from '@blueprintjs/core';\nimport './App.css';\nimport rp from 'request-promise';\nimport { throwStatement } from '@babel/types';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      clientId: '1x46iftmdzqtt',\n      clientSecret: '4ctdx7k5du36r5q1qfkarhw2ts5tbbhyv13c8yar0es6k40cwg',\n      authEndpoint: 'https://api.capsulecrm.com/oauth/authorise',\n      tokenEndpoint: 'https://api.capsulecrm.com/oauth/token',\n      authCode: '',\n      homeUrl: 'https://40807517.ngrok.io/'\n    };\n\n    this.updateState = this.updateState.bind(this);\n    this.nextStage = this.nextStage.bind(this);\n    this.getToken = this.getToken.bind(this);\n  }\n\n  render() {\n\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const code = params.get('code');\n    if (this.state.authCode != code) {\n      this.setState({\n        authCode: code\n      });\n    }\n\n    var main;\n\n    if (this.state.authCode) {\n      main = \n        <div>\n          <h1>Your authorisation code is: {this.state.authCode}</h1>\n          <button onClick={this.getToken} className=\"button\" value=\"Access Token\"/>\n        </div>\n      \n    } else {\n      main = \n        <div>\n          <FormGroup\n              helperText='The ID of the registered application'\n              label='Client ID'\n              labelFor='text-input'\n              labelInfo='(required)'>\n            <InputGroup id='text-input' placeholder='1x46iftmdzqtt'></InputGroup>\n          </FormGroup>\n\n          <FormGroup\n              helperText='Helper text'\n              label='Client Secret'\n              labelFor='text-input'\n              labelInfo='(required)'>\n            <InputGroup id='text-input' placeholder='4ctdx7k5du36r5q1qfkarhw2ts5tbbhyv13c8yar0es6k40cwg'></InputGroup>\n          </FormGroup>\n\n          <FormGroup\n              helperText='Helper text'\n              label='Auth Endpoint'\n              labelFor='text-input'\n              labelInfo='(required)'>\n            <InputGroup id='text-input' placeholder='https://my.domain/oauth/authorise'></InputGroup>\n          </FormGroup>\n\n          <FormGroup\n              helperText='Helper text'\n              label='Token Endpoint'\n              labelFor='text-input'\n              labelInfo='(required)'>\n            <InputGroup id='text-input' placeholder='https://my.domain/oauth/token'></InputGroup>\n          </FormGroup>\n        </div>\n    }\n\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\"/>\n        <body>\n          <div className=\"container center\">\n            {main}\n          </div>\n        </body>\n      </div>\n    );\n  }\n  \n  updateState(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n\n    this.setState({\n      [name]: value,\n    });\n  }\n  \n  nextStage(event) {\n    event.preventDefault();\n    const url = `${this.state.authEndpoint}?response_type=code&client_id=${this.state.clientId}&redirect_uri=${this.state.homeUrl}&scope=read write`\n    console.log(url)\n    window.location = url;\n  }\n\n  getToken() {\n    const authCode = this.state.authCode;\n\n    const options = {\n      uri: this.state.tokenEndpoint,\n      method: 'POST',\n      body: {\n        code: authCode,\n        client_id: this.state.clientId,\n        client_secret: this.state.clientSecret,\n        grant_type: \"authorization_code\"\n      },\n      json: true\n    };\n\n    rp.post(options)\n      .then(function(res) {\n        console.log(res);\n      })\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/cinnes/Documents/Github/oauth2-helper/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport rp from 'request-promise';\nimport DetailsForm from './DetailsForm';\nimport { Card, Elevation, Button, Code, Switch, Pre } from '@blueprintjs/core';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    console.log(localStorage.getItem('details'));\n    const details = localStorage.getItem('details') || {\n      clientId: '',\n      clientSecret: '',\n      authEndpoint: '',\n      tokenEndpoint: ''\n    };\n    this.state = {\n      darkMode: true,\n      clientId: details.clientId,\n      clientSecret: details.clientSecret,\n      authEndpoint: details.authEndpoint,\n      tokenEndpoint: details.tokenEndpoint,\n      authCode: params.get('code'),\n      homeUrl: 'https://dd9a22d6.ngrok.io/',\n      tokenResponse: '',\n      tokenError: '',\n      details: details\n    };\n    this.updateState = this.updateState.bind(this);\n    this.redirect = this.redirect.bind(this);\n    this.getToken = this.getToken.bind(this);\n    this.toggleDarkMode = this.toggleDarkMode.bind(this);\n  }\n\n  render() {\n    var main;\n    var tokenBlock;\n\n    if (this.state.tokenResponse) {\n      tokenBlock = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"Token Response\"), React.createElement(Pre, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(Code, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, this.state.tokenResponse)));\n    } else if (this.state.tokenError) {\n      tokenBlock = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Error\"), React.createElement(Pre, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, React.createElement(Code, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, this.state.tokenError)));\n    } else {\n      tokenBlock = React.createElement(Button, {\n        disabled: this.state.tokenResponse,\n        onClick: this.getToken,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Fetch Token\");\n    }\n\n    if (this.state.authCode) {\n      main = React.createElement(Card, {\n        interactive: false,\n        elevation: Elevation.TWO,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \"Authorisation Code: \"), React.createElement(Pre, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Code, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, this.state.authCode)), tokenBlock);\n    } else {\n      main = React.createElement(Card, {\n        interactive: false,\n        elevation: Elevation.TWO,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(DetailsForm, {\n        changeHandler: this.updateState,\n        submitHandler: this.redirect,\n        details: this.state.details,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }));\n    }\n\n    const appClass = this.state.darkMode ? \"App bp3-dark\" : \"App\";\n    return React.createElement(\"div\", {\n      className: appClass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      checked: this.state.darkMode,\n      label: \"Dark Mode\",\n      onChange: this.toggleDarkMode,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), main));\n  }\n\n  updateState(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  redirect(event) {\n    localStorage.setItem(\"details\", {\n      clientId: this.state.clientId,\n      clientSecret: this.state.clientSecret,\n      authEndpoint: this.state.authEndpoint,\n      tokenEndpoint: this.state.tokenEndpoint\n    });\n    event.preventDefault();\n    const url = \"\".concat(this.state.authEndpoint, \"?response_type=code&client_id=\").concat(this.state.clientId, \"&redirect_uri=\").concat(this.state.homeUrl, \"&scope=read write\");\n    window.location = url;\n  }\n\n  getToken() {\n    const authCode = this.state.authCode;\n    const options = {\n      uri: encodeURI(this.state.tokenEndpoint),\n      method: 'POST',\n      body: {\n        code: authCode,\n        client_id: this.state.clientId,\n        client_secret: this.state.clientSecret,\n        grant_type: \"authorization_code\"\n      },\n      json: true\n    };\n    const that = this;\n    rp.post(options).then(function (res) {\n      that.setState({\n        tokenResponse: JSON.stringify(res, null, 1)\n      });\n    }).catch(function (err) {\n      that.setState({\n        tokenError: JSON.stringify(err.error, null, 1)\n      });\n    });\n  }\n\n  toggleDarkMode() {\n    this.setState({\n      darkMode: !this.state.darkMode\n    });\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/cinnes/Documents/Github/oauth2-helper/src/App.js"],"names":["React","rp","DetailsForm","Card","Elevation","Button","Code","Switch","Pre","App","Component","constructor","props","search","window","location","params","URLSearchParams","console","log","localStorage","getItem","details","clientId","clientSecret","authEndpoint","tokenEndpoint","state","darkMode","authCode","get","homeUrl","tokenResponse","tokenError","updateState","bind","redirect","getToken","toggleDarkMode","render","main","tokenBlock","TWO","appClass","event","name","target","value","setState","setItem","preventDefault","url","options","uri","encodeURI","method","body","code","client_id","client_secret","grant_type","json","that","post","then","res","JSON","stringify","catch","err","error"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport rp from 'request-promise';\nimport DetailsForm from './DetailsForm';\n\nimport { Card, Elevation, Button, Code, Switch, Pre } from '@blueprintjs/core';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n\n    console.log(localStorage.getItem('details'))\n    const details = localStorage.getItem('details') || {\n      clientId: '',\n      clientSecret: '',\n      authEndpoint: '',\n      tokenEndpoint: ''\n    };\n\n    this.state = {\n      darkMode: true,\n      clientId: details.clientId,\n      clientSecret: details.clientSecret,\n      authEndpoint: details.authEndpoint,\n      tokenEndpoint: details.tokenEndpoint,\n      authCode: params.get('code'),\n      homeUrl: 'https://dd9a22d6.ngrok.io/',\n      tokenResponse: '',\n      tokenError: '',\n      details: details\n    };\n\n    this.updateState = this.updateState.bind(this);\n    this.redirect = this.redirect.bind(this);\n    this.getToken = this.getToken.bind(this);\n    this.toggleDarkMode = this.toggleDarkMode.bind(this);\n  }\n\n  render() {\n    var main;\n\n    var tokenBlock;\n\n    if (this.state.tokenResponse) {\n      tokenBlock = \n        <div>\n          <h4>Token Response</h4>\n          <Pre><Code>{this.state.tokenResponse}</Code></Pre>\n        </div>\n    } else if (this.state.tokenError) {\n      tokenBlock = \n        <div>\n          <h4>Error</h4>\n          <Pre><Code>{this.state.tokenError}</Code></Pre>\n        </div>\n    } else {\n      tokenBlock = <Button disabled={this.state.tokenResponse} onClick={this.getToken}>Fetch Token</Button>\n    }\n\n    if (this.state.authCode) {\n      main = \n        <Card interactive={false} elevation={Elevation.TWO}>\n          <h4>Authorisation Code: </h4>\n          <Pre><Code>{this.state.authCode}</Code></Pre>\n          {tokenBlock}\n        </Card>\n    } else {\n      main =\n        <Card interactive={false} elevation={Elevation.TWO}>\n          <DetailsForm \n            changeHandler={this.updateState} \n            submitHandler={this.redirect}\n            details={this.state.details}/>\n        </Card>\n    }\n\n    const appClass = this.state.darkMode ? \"App bp3-dark\" : \"App\";\n\n    return (\n      <div className={appClass}>\n        <div className=\"container center\">\n          <Switch checked={this.state.darkMode} label=\"Dark Mode\" onChange={this.toggleDarkMode} />\n          {main}\n        </div>\n      </div>\n    );\n  }\n  \n  updateState(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n\n    this.setState({\n      [name]: value,\n    });\n  }\n  \n  redirect(event) {\n    localStorage.setItem(\"details\", {\n      clientId: this.state.clientId,\n      clientSecret: this.state.clientSecret,\n      authEndpoint: this.state.authEndpoint,\n      tokenEndpoint: this.state.tokenEndpoint\n    });\n\n    event.preventDefault();\n    const url = `${this.state.authEndpoint}?response_type=code&client_id=${this.state.clientId}&redirect_uri=${this.state.homeUrl}&scope=read write`\n    window.location = url;\n  }\n\n  getToken() {\n    const authCode = this.state.authCode;\n\n    const options = {\n      uri: encodeURI(this.state.tokenEndpoint),\n      method: 'POST',\n      body: {\n        code: authCode,\n        client_id: this.state.clientId,\n        client_secret: this.state.clientSecret,\n        grant_type: \"authorization_code\"\n      },\n      json: true\n    };\n\n    const that = this;\n    rp.post(options)\n      .then(function(res) {\n        that.setState({\n          tokenResponse: JSON.stringify(res, null, 1),\n        });\n      })\n      .catch(function(err) {\n        that.setState({\n          tokenError: JSON.stringify(err.error, null, 1),\n        });\n      });\n  }\n\n  toggleDarkMode() {\n    this.setState({\n      darkMode: !this.state.darkMode,\n    });\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
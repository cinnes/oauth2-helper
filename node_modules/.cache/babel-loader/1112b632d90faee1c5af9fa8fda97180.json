{"ast":null,"code":"var _jsxFileName = \"/home/cinnes/Documents/Github/oauth2-helper/src/App.js\";\nimport React from 'react';\nimport DetailsForm from './DetailsForm';\nimport './App.css';\nimport rp from 'request-promise';\nimport { throwStatement } from '@babel/types';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      clientId: '1x46iftmdzqtt',\n      clientSecret: '4ctdx7k5du36r5q1qfkarhw2ts5tbbhyv13c8yar0es6k40cwg',\n      authEndpoint: 'https://api.capsulecrm.com/oauth/authorise',\n      tokenEndpoint: 'https://api.capsulecrm.com/oauth/token',\n      authCode: ''\n    };\n    this.updateState = this.updateState.bind(this);\n    this.nextStage = this.nextStage.bind(this);\n    this.getToken = this.getToken.bind(this);\n  }\n\n  render() {\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    this.setState({\n      authCode: params.get('code')\n    });\n    var main;\n\n    if (this.state.authCode) {\n      main = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, \"Your auth code is: \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, \"asdasd\"), React.createElement(\"button\", {\n        onClick: this.getToken,\n        className: \"button\",\n        value: \"Access Token\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }));\n    } else {\n      main = React.createElement(DetailsForm, {\n        changeHandler: this.updateState,\n        submitHandler: this.nextStage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      className: \"App-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }), React.createElement(\"body\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, main)));\n  }\n\n  updateState(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  nextStage() {\n    console.log(\"doing it\");\n    window.location.href = this.state.authEndpoint + \"?response_type=code&client_id=\" + this.state.clientId + \"&redirect_uri=https://developers.google.com/oauthplayground&scope=read write\";\n  }\n\n  getToken() {\n    console.log(\"getting token\");\n    const authCode = this.state.authCode;\n    const options = {\n      uri: this.state.tokenEndpoint,\n      method: 'POST',\n      body: {\n        code: authCode,\n        client_id: this.state.clientId,\n        client_secret: this.state.clientSecret,\n        grant_type: \"authorization_code\"\n      },\n      json: true\n    };\n    rp.post(options).then(function (res) {\n      console.log(res);\n    });\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/cinnes/Documents/Github/oauth2-helper/src/App.js"],"names":["React","DetailsForm","rp","throwStatement","App","Component","constructor","props","state","clientId","clientSecret","authEndpoint","tokenEndpoint","authCode","updateState","bind","nextStage","getToken","render","search","window","location","params","URLSearchParams","setState","get","main","event","name","target","value","console","log","href","options","uri","method","body","code","client_id","client_secret","grant_type","json","post","then","res"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAO,WAAP;AACA,OAAOC,EAAP,MAAe,iBAAf;AACA,SAASC,cAAT,QAA+B,cAA/B;;AAEA,MAAMC,GAAN,SAAkBJ,KAAK,CAACK,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,eADC;AAEXC,MAAAA,YAAY,EAAE,oDAFH;AAGXC,MAAAA,YAAY,EAAE,4CAHH;AAIXC,MAAAA,aAAa,EAAE,wCAJJ;AAKXC,MAAAA,QAAQ,EAAE;AALC,KAAb;AAQA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKE,QAAL,GAAgB,KAAKA,QAAL,CAAcF,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AAEDG,EAAAA,MAAM,GAAG;AAEP,UAAMC,MAAM,GAAGC,MAAM,CAACC,QAAP,CAAgBF,MAA/B;AACA,UAAMG,MAAM,GAAG,IAAIC,eAAJ,CAAoBJ,MAApB,CAAf;AACA,SAAKK,QAAL,CAAc;AACZX,MAAAA,QAAQ,EAAES,MAAM,CAACG,GAAP,CAAW,MAAX;AADE,KAAd;AAIA,QAAIC,IAAJ;;AAEA,QAAI,KAAKlB,KAAL,CAAWK,QAAf,EAAyB;AACvBa,MAAAA,IAAI,GACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,EAGA;AAAQ,QAAA,OAAO,EAAE,KAAKT,QAAtB;AAAgC,QAAA,SAAS,EAAC,QAA1C;AAAmD,QAAA,KAAK,EAAC,cAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHA,CADF;AAQD,KATD,MASO;AACLS,MAAAA,IAAI,GAAG,oBAAC,WAAD;AAAa,QAAA,aAAa,EAAE,KAAKZ,WAAjC;AAA8C,QAAA,aAAa,EAAE,KAAKE,SAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD;;AAED,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,SAAS,EAAC,YAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGU,IADH,CADF,CAFF,CADF;AAUD;;AAEDZ,EAAAA,WAAW,CAACa,KAAD,EAAQ;AACjB,UAAMC,IAAI,GAAGD,KAAK,CAACE,MAAN,CAAaD,IAA1B;AACA,UAAME,KAAK,GAAGH,KAAK,CAACE,MAAN,CAAaC,KAA3B;AAEA,SAAKN,QAAL,CAAc;AACZ,OAACI,IAAD,GAAQE;AADI,KAAd;AAGD;;AAEDd,EAAAA,SAAS,GAAG;AACVe,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAZ,IAAAA,MAAM,CAACC,QAAP,CAAgBY,IAAhB,GAAuB,KAAKzB,KAAL,CAAWG,YAAX,GAA0B,gCAA1B,GAA6D,KAAKH,KAAL,CAAWC,QAAxE,GAAmF,8EAA1G;AACD;;AAEDQ,EAAAA,QAAQ,GAAG;AACTc,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,UAAMnB,QAAQ,GAAG,KAAKL,KAAL,CAAWK,QAA5B;AAEA,UAAMqB,OAAO,GAAG;AACdC,MAAAA,GAAG,EAAE,KAAK3B,KAAL,CAAWI,aADF;AAEdwB,MAAAA,MAAM,EAAE,MAFM;AAGdC,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAEzB,QADF;AAEJ0B,QAAAA,SAAS,EAAE,KAAK/B,KAAL,CAAWC,QAFlB;AAGJ+B,QAAAA,aAAa,EAAE,KAAKhC,KAAL,CAAWE,YAHtB;AAIJ+B,QAAAA,UAAU,EAAE;AAJR,OAHQ;AASdC,MAAAA,IAAI,EAAE;AATQ,KAAhB;AAYAxC,IAAAA,EAAE,CAACyC,IAAH,CAAQT,OAAR,EACGU,IADH,CACQ,UAASC,GAAT,EAAc;AAClBd,MAAAA,OAAO,CAACC,GAAR,CAAYa,GAAZ;AACD,KAHH;AAID;;AAtF+B;;AAyFlC,eAAezC,GAAf","sourcesContent":["import React from 'react';\nimport DetailsForm from './DetailsForm';\nimport './App.css';\nimport rp from 'request-promise';\nimport { throwStatement } from '@babel/types';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      clientId: '1x46iftmdzqtt',\n      clientSecret: '4ctdx7k5du36r5q1qfkarhw2ts5tbbhyv13c8yar0es6k40cwg',\n      authEndpoint: 'https://api.capsulecrm.com/oauth/authorise',\n      tokenEndpoint: 'https://api.capsulecrm.com/oauth/token',\n      authCode: ''\n    };\n\n    this.updateState = this.updateState.bind(this);\n    this.nextStage = this.nextStage.bind(this);\n    this.getToken = this.getToken.bind(this);\n  }\n\n  render() {\n\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    this.setState({\n      authCode: params.get('code')\n    });\n\n    var main;\n\n    if (this.state.authCode) {\n      main = \n        <div>\n          <h1>Your auth code is: </h1>\n          <p>asdasd</p>\n        <button onClick={this.getToken} className=\"button\" value=\"Access Token\"/>\n\n        </div> \n      \n    } else {\n      main = <DetailsForm changeHandler={this.updateState} submitHandler={this.nextStage}/>;\n    }\n\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\"/>\n        <body>\n          <div className=\"container center\">\n            {main}\n          </div>\n        </body>\n      </div>\n    );\n  }\n  \n  updateState(event) {\n    const name = event.target.name;\n    const value = event.target.value;\n\n    this.setState({\n      [name]: value,\n    });\n  }\n  \n  nextStage() {\n    console.log(\"doing it\")\n    window.location.href = this.state.authEndpoint + \"?response_type=code&client_id=\" + this.state.clientId + \"&redirect_uri=https://developers.google.com/oauthplayground&scope=read write\";\n  }\n\n  getToken() {\n    console.log(\"getting token\")\n    const authCode = this.state.authCode;\n\n    const options = {\n      uri: this.state.tokenEndpoint,\n      method: 'POST',\n      body: {\n        code: authCode,\n        client_id: this.state.clientId,\n        client_secret: this.state.clientSecret,\n        grant_type: \"authorization_code\"\n      },\n      json: true\n    };\n\n    rp.post(options)\n      .then(function(res) {\n        console.log(res);\n      })\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}